# Docker Compose file for Nutrina Voice-Powered Diet Tracking Assistant

services:
  app:
    build: .
    ports:
      - "3030:3030"
      - "3031:3031"
    environment:
      - NODE_ENV=production
      - PORT=3030
      - WS_PORT=3031
      - MONGODB_URI=mongodb+srv://jetrixadmin:Jetrix123@tj-jetrix-cluster.uywnr.mongodb.net/
      - DATABASE_URL=mongodb+srv://jetrixadmin:Jetrix123@tj-jetrix-cluster.uywnr.mongodb.net/
      - CORS_ORIGIN=*
      - GEMINI_API_KEY=AIzaSyBajUB17roL9-X23RfZoq7Q58jMf-2pTJA
      - ELEVENLABS_API_KEY=sk_92e25d3e0fb15ae2b6af3354f7b2d3e97f08560c3b9ac22a
      - ELEVENLABS_VOICE_ID=FGY2WhTYpPnrIDTdsKH5
      - ELEVENLABS_BASE_URL=https://api.elevenlabs.io/v1
      - GEMINI_MODEL=gemini-1.5-flash
      - GOOGLE_APPLICATION_CREDENTIALS=/app/google-credentials.json
      - AUDIO_SAMPLE_RATE=16000
      - AUDIO_CHANNELS=1
      - ENABLE_PERFORMANCE_MODE=true
      - TTS_MODEL=eleven_monolingual_v1
      - TTS_OUTPUT_FORMAT=mp3_44100_32
      - AI_MAX_TOKENS=120
      - AI_TEMPERATURE=0.4
      - CONVERSATION_HISTORY_LIMIT=4
      - ENABLE_AI_CACHING=true
      - AI_TIMEOUT=8000
      - STT_TIMEOUT=3000
      - TTS_TIMEOUT=2000
      - ENABLE_PARALLEL_PROCESSING=true
    # No depends_on since we're using external MongoDB Atlas
    restart: unless-stopped
    networks:
      - nutrina-network

  # MongoDB service removed since you're using MongoDB Atlas

networks:
  nutrina-network:
    driver: bridge 